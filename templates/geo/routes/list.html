{% extends "base.html" %}
{% block head_title %}
Routes
{% endblock %}
{% block content %}
    <h3>Routes</h3>
    <div class="row">
        <div class="col-md-6">
            {% for route in data %}
                <a>{{ route.name }}</a>
                <br>
            {% endfor %}
            {% if new_route %}
                <a>{{ new_route.name }}</a>
            {% endif %}
        </div>
        <div class="col-md-6">
            {% if data %}
                <script type="text/javascript"
                        src="http://maps.google.com/maps/api/js?sensor=false&key=AIzaSyDMdeTRYdZ-q3-Q8JyHEw8wrV8rbGQZuBE"></script>
                <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
                <script>
                    $(document).ready(function () {
                        var latlng = new google.maps.LatLng("3.433737", "-76.520240");
                        var mapOptions = {
                            zoom: 12,
                            center: latlng,
                            mapTypeControl: false,
                            navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
                            mapTypeId: google.maps.MapTypeId.ROADMAP
                        };
                        map = new google.maps.Map($('.map')[0], mapOptions);

                        {#            var marker = new google.maps.Marker({#}
                        {#                position: latlng,#}
                        {#                map: map,#}
                        {#                title: "Jeste≈õ tutaj"#}
                        {#            });#}

                        {% for route in data %}
                            console.log({{ route.long }});
                            console.log({{ route.lat }});
                            latlng = new google.maps.LatLng("{{ route.lat }}", "{{ route.long }}");
                            new google.maps.Marker({
                                position: latlng,
                                map: map,
                                title: "{{ route.name }}"
                            });
                        {% endfor %}
                    });
                </script>
                <div class="map" style="width: 400px; height: 400px;"></div>
            {% endif %}
        </div>
    </div>
    <hr>
    <p>
        <a href="{% url "create_route" %}" class="btn btn-primary">Create new route</a>
    </p>
{% endblock %}